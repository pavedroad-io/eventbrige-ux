<div class="container">
  <h1>User administration</h1>

  <div>
    <mat-card style="border: 1px solid #1565c0 !important">
      <mat-card-title> Current users </mat-card-title>
      <mat-card-content>
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          style="width: 100%"
          class="mat-elevation-z8"
        >
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header width="50px">
              ID
            </th>
            <td mat-cell *matCellDef="let element">{{element.id}}</td>
          </ng-container>

          <ng-container matColumnDef="name" style="width: 10%">
            <th mat-header-cell *matHeaderCellDef mat-sort-header width="50px">
              Name
            </th>
            <td mat-cell *matCellDef="let element">{{element.name}}</td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header width="100px">
              Email
            </th>
            <td mat-cell *matCellDef="let element">{{element.email}}</td>
          </ng-container>

          <ng-container matColumnDef="phone">
            <th mat-header-cell *matHeaderCellDef mat-sort-header width="50px">
              Phone
            </th>
            <td mat-cell *matCellDef="let element">{{element.phone}}</td>
          </ng-container>

          <ng-container matColumnDef="profile">
            <th mat-header-cell *matHeaderCellDef mat-sort-header width="50px">
              Profile URL
            </th>
            <td mat-cell *matCellDef="let element">{{element.profile}}</td>
          </ng-container>

          <ng-container matColumnDef="role">
            <th mat-header-cell *matHeaderCellDef mat-sort-header width="50px">
              Role
            </th>
            <td mat-cell *matCellDef="let element">{{element.role}}</td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef mat-sort-header width="50px">
              Actions
            </th>
            <td mat-cell *matCellDef="let element">
              <a>
                <mat-icon
                  aria-hidden="false"
                  aria-label="delete selected items"
                  (click)="deleteUser(element)"
                  color="warn"
                >
                  delete
                </mat-icon>
              </a>

              <a>
                <mat-icon
                  aria-hidden="false"
                  aria-label="edit selected items"
                  (click)="editUser(element)"
                  color="primary"
                >
                  edit
                </mat-icon>
              </a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </mat-card-content>
    </mat-card>

    <div>
      <p></p>
    </div>

    <mat-card style="border: 1px solid #1565c0 !important">
      <mat-card-title> {{ modeLabel }} </mat-card-title>
      <mat-card-content>
        <form [formGroup]="userFG" (ngSubmit)="onSubmit()" #fd="ngForm">
          <div>
            <mat-form-field>
              <mat-label for="name">Name</mat-label>
              <input
                matInput
                formControlName="name"
                class="form-control"
                placeholder="A Smith"
                required
              />
              <div *ngIf="submitted && controlValid('name')" class="alert">
                <div *ngIf="controlValid('name')">Name is required</div>
              </div>
            </mat-form-field>
          </div>

          <div>
            <mat-form-field>
              <mat-label for="email">Email</mat-label>
              <input
                matInput
                formControlName="email"
                placeholder="a@smith.com"
              />
            </mat-form-field>
            <div *ngIf="submitted && controlValid('email')" class="alert-feedback">
              <div *ngIf="controlValid('email')">Email is required</div>
            </div>
          </div>

          <div>
            <mat-form-field>
              <mat-label for="phone">Phone</mat-label>
              <input
                matInput
                formControlName="phone"
                placeholder="+1 (111) 222-3333"
              />
            </mat-form-field>
          </div>

          <div>
            <mat-form-field>
              <mat-label for="profile">Profile URL</mat-label>
              <input
                matInput
                formControlName="profile"
                placeholder="https://avatar.com/myprofile"
              />
            </mat-form-field>
          </div>

          <div>
            <mat-form-field>
              <mat-label for="role">Role</mat-label>

              <input matInput formControlName="role" placeholder="admin" />
            </mat-form-field>
            <div
              *ngIf="submitted && controlValid('role')"
              class="alert-feedback"
            >
              <div *ngIf="controlValid('role')">Email is required</div>
            </div>
          </div>

          <div>
            <button
              type="button"
              mat-raised-button
              color="primary"
              [disabled]="!userFG.valid"
              (click)="addUser(fd)"
            >
              {{ modeButton }}
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
